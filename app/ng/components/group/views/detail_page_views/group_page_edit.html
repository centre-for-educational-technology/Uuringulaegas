<div class="page-header center">
    <h1>Edit group</h1>
    <small></small>
</div>

<div class="alert alert-success" role="alert" collapse="postingState != 1"> Group updated! </div>

<div class="alert alert-danger" role="alert" collapse="postingState != 2"> Error! Are you authorized? If you think you should be, contact the adminstrator please.</div>


<form class="form-horizontal" novalidate>
    <form-input-text id="group_name" label="Name" model="groupForm.name" req="true" placeholder="Group name"></form-input-text>

    <form-textarea id="group_description" label="Description" rows="5" model="groupForm.description" req="true" placeholder="A short description about this group"></form-textarea>

    <form-select-multiple label="Domains" options="$root.langStrings.inqAct.domains" model="groupForm.domains" req="true"></form-select-multiple>

    <form-input-text id="group_topics" label="Topics" model="groupForm.topics" placeholder="Comma separated"></form-input-text>

    <div class="form-group">
        <label class="col-sm-4 control-label">Inquiry Activities</label>
        <div class="col-sm-8">
            <ui-select multiple ng-model="groupForm.inq_activities" theme="bootstrap">
                <ui-select-match placeholder="Add activity...">{{$item.post_title}}</ui-select-match>
                <ui-select-choices repeat="activity in searchedActivities | filter: {post_title: $select.search} | objectNotInArray: groupForm.inq_activities" refresh="loadActivities($select.search)" refresh-delay="0">
                    <div ng-bind-html="activity.post_title | highlight: $select.search"></div>
                    <small>
                        Level: <span ng-bind-html="'' + formOptions.levels[activity.proficiency_level]"></span>
                    </small>
                </ui-select-choices>
            </ui-select>
            <small class="help-block">Type above to search Activities</small>
        </div>
    </div>

    <hr/>

    <div class="form-group">
        <label class="col-sm-4 control-label">Teachers</label>
        <div class="col-sm-8">
            <ui-select multiple ng-model="groupForm.teachers" theme="bootstrap">
                <ui-select-match placeholder="Add teacher...">{{$item.display_name}} &lt;{{$item.user_email}}&gt;</ui-select-match>
                <ui-select-choices repeat="teacher in searchedTeachers | orFilter: {full_name: $select.search, user_email: $select.search} | objectNotInArray: groupForm.teachers" refresh="loadTeachers($select.search)" refresh-delay="0">
                    <div ng-bind-html="teacher.full_name | highlight: $select.search"></div>
                    <small>
                        Email: <span ng-bind-html="'' + teacher.user_email | highlight: $select.search"></span>
                    </small>
                </ui-select-choices>
            </ui-select>
            <small class="help-block">Type above to search teachers by Name or Email</small>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-4 control-label">Learners</label>
        <div class="col-sm-8">
            <ui-select multiple ng-model="groupForm.learners" theme="bootstrap">
                <ui-select-match placeholder="Add learner...">{{$item.display_name}} &lt;{{$item.user_email}}&gt;</ui-select-match>
                <ui-select-choices repeat="learner in searchedLearners | orFilter: {full_name: $select.search, user_email: $select.search} | objectNotInArray: groupForm.learners" refresh="loadLearners($select.search)" refresh-delay="0">
                    <div ng-bind-html="learner.full_name | highlight: $select.search"></div>
                    <small>
                        Email: <span ng-bind-html="'' + learner.user_email | highlight: $select.search"></span>
                    </small>
                </ui-select-choices>
            </ui-select>
            <small class="help-block">Type above to search learners by Name or Email</small>
        </div>
    </div>


    <div class="form-group">
        <div class="col-sm-4"></div>
        <div class="col-sm-8">
            <input class="btn btn-success" type="button" ng-click="updateGroup(editGroup)" ng-disabled="updating" value="Update info" />
        </div>
    </div>

</form>

<div class="well" ng-if="$root.developerView">
    <p>GroupData model <strong>LiveView</strong> (for debugging only):</p>
    <pre>{{ groupForm | json}}</pre>
</div>
